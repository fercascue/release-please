name: Release Workflow

on:
  push:
    branches:
      - 'main'
permissions:
     contents: write
     pull-requests: write
jobs:
  release-job:
    runs-on: ubuntu-latest

    steps:
    
      - name: Check out code
        uses: actions/checkout@v2

      - name: Release with release-please
        uses: google-github-actions/release-please-action@v3.7.12
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          release-type: node
          package-name: sample-portal
          pull-request-header: ':robot: Release reated'
      - name: Code Coverage Report
        uses: irongut/CodeCoverageSummary@v1.3.0
        with:
           filename: clover.xml
           badge: true
           fail_below_min: true
           format: markdown
           hide_branch_rate: false
           hide_complexity: true
           indicators: true
           output: both
           thresholds: '60 80'        
